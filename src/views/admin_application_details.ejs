<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết Hồ sơ Ứng tuyển</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f8f9fa; }
        .header { background-color: #343a40; color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { margin: 0; font-size: 1.5rem; }
        .header a { color: #ffc107; text-decoration: none; }
        .container { max-width: 800px; margin: 2rem auto; padding: 2rem; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .back-link { display: inline-block; margin-bottom: 1rem; color: #007bff; text-decoration: none;}
        .back-link i { margin-right: 0.5rem; }
        h2 { border-bottom: 1px solid #dee2e6; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .detail-section { margin-bottom: 1.5rem; }
        .detail-section h3 { font-size: 1.2rem; margin-bottom: 0.5rem; color: #495057; }
        .detail-section p { margin: 0.3rem 0; color: #343a40; }
        .detail-section p strong { color: #6c757d; min-width: 100px; display: inline-block;}
        .cv-link { color: #007bff; text-decoration: none; font-weight: bold;}
        .status-chip { /* Copy style từ admin_applications.ejs */ }
        /* Thêm các style khác nếu cần */
    </style>
</head>
<body>
    <div class="header">
        <h1>Chi tiết Hồ sơ #<%= application.id %></h1>
        <a href="/api/admin/logout">Đăng xuất</a>
    </div>

    <div class="container">
        <a href="/api/admin/applications-list" class="back-link"><i class="fas fa-arrow-left"></i> Quay lại Danh sách</a>

        <% if (typeof application !== 'undefined' && application) { %>
            <div class="detail-section">
                <h3>Thông tin Ứng viên</h3>
                <p><strong>Họ tên:</strong> <%= application.candidate_name %></p>
                <p><strong>Email:</strong> <%= application.email %></p>
                <p><strong>Số điện thoại:</strong> <%= application.phone_number || 'N/A' %></p>
                <% if (application.cv_url) { %>
                     <p><strong>CV:</strong> <a href="<%= application.cv_url %>" target="_blank" class="cv-link">Xem/Tải CV</a></p>
                <% } %>
                 <p><strong>Ngày nộp:</strong> <%= new Date(application.applied_at).toLocaleString('vi-VN') %></p>
            </div>

            <div class="detail-section">
                <h3>Thông tin Việc làm</h3>
                <p><strong>Vị trí:</strong> <%= application.job_title %></p>
                <p><strong>Công ty:</strong> <%= application.company_name || 'N/A' %></p>
                <p><strong>Địa điểm:</strong> <%= application.location || 'N/A' %></p>
            </div>

             <div class="detail-section">
                <h3>Trạng thái Hồ sơ</h3>
                <p><strong>Trạng thái hiện tại:</strong> <span class="status-chip status-<%= application.status %>"><%= application.status %></span></p>
                <% if (application.rejection_reason) { %>
                    <p><strong>Lý do từ chối:</strong> <%= application.rejection_reason %></p>
                <% } %>
                </div>

             <% } else { %>
            <p>Không tìm thấy thông tin hồ sơ.</p>
        <% } %>
    </div>
     <script>
        // Add styles for status chips dynamically if needed
        const statusSpans = document.querySelectorAll('.status-chip');
        statusSpans.forEach(span => {
            const status = span.classList.item(1).replace('status-', ''); // Get status like 'pending'
            // Apply styles based on status (copy from admin_applications.ejs CSS)
             switch (status) {
                case 'pending': span.style.backgroundColor = '#6c757d'; break;
                case 'screening': span.style.backgroundColor = '#007bff'; break;
                case 'interviewing':
                case 'passed_interview': span.style.backgroundColor = '#fd7e14'; break;
                case 'offered': span.style.backgroundColor = '#28a745'; break;
                case 'rejected': span.style.backgroundColor = '#dc3545'; break;
                default: span.style.backgroundColor = '#6c757d';
            }
        });
     </script>
</body>
</html>